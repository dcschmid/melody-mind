---
/**
 * Reset Password Page für MelodyMind
 *
 * Diese Seite zeigt das Formular zum Zurücksetzen des Passworts an und verwendet das AuthLayout.
 * Sie kann in zwei Modi angezeigt werden:
 * 1. Anforderung eines Reset-Links (ohne Token)
 * 2. Festlegung eines neuen Passworts (mit Token in der URL)
 *
 * Sie ist nach WCAG AAA Standards optimiert.
 */
import AuthLayout from "@components/auth/AuthLayout.astro";
import PasswordResetForm from "@components/auth/PasswordResetForm.astro";
import { getLangFromUrl, useTranslations } from "@utils/i18n";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Prüfen, ob ein Token in der URL vorhanden ist
const url = new URL(Astro.request.url);
const token = url.searchParams.get("token");
const isConfirmReset = !!token;

// Titel und Beschreibung basierend auf dem Modus festlegen
const title = isConfirmReset
  ? t("auth.password_reset_confirm.title")
  : t("auth.password_reset.title");

const description = isConfirmReset
  ? "Lege ein neues Passwort für dein Melody Mind-Konto fest."
  : "Fordere einen Link zum Zurücksetzen deines Passworts an.";
---

<AuthLayout title={title} description={description}>
  <PasswordResetForm />
</AuthLayout>
