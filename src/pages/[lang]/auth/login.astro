---
/**
 * @component LoginPage
 * @description Login Page for MelodyMind that displays the auth form in login mode.
 * The page is optimized according to WCAG AAA standards for maximum accessibility
 * and provides a seamless login experience with form validation and error handling.
 *
 */

import AuthForm from "@components/auth/AuthForm.astro";
import { getLangFromUrl, useTranslations } from "@utils/i18n";
import Layout from "@layouts/Layout.astro";
import { Icon } from "astro-icon/components";

// Extract language code from the current URL for internationalization
const lang = getLangFromUrl(Astro.url);
// Initialize translation function with the extracted language - ensure lang is a string
const t = useTranslations(lang.toString());
---

<Layout
  title={t("auth.login.title")}
  description={t("auth.login.description") ||
    "Sign in to Melody Mind to continue your musical journey."}
>
  <!-- Login container with responsive layout and improved accessibility -->

  <!-- Back to home link for improved navigation -->
  <div class="mb-4 text-left">
    <a
      href={`/${String(lang)}/`}
      class="inline-flex items-center rounded-md px-2 py-1 text-sm text-purple-300 transition-colors duration-200 hover:text-purple-200 focus:ring-2 focus:ring-purple-400 focus:ring-offset-2 focus:ring-offset-gray-900 focus:outline-none"
      aria-label={t("auth.login.back_to_home") || "Back to home page"}
    >
      <Icon name="arrow-left" class="mr-1 h-4 w-4 text-current" aria-hidden="true" />
      {t("auth.login.back_to_home") || "Back to home"}
    </a>
  </div>

  <h1
    id="login-heading"
    class="mb-6 text-center text-2xl leading-relaxed font-bold tracking-wide text-purple-900 md:text-3xl lg:text-4xl dark:text-purple-100"
  >
    {t("auth.login.heading") || "Log In to MelodyMind"}
  </h1>

  <!-- Auth form with login mode and enhanced contrast for accessibility -->
  <div
    class="rounded-lg bg-white p-6 shadow-lg transition-all duration-300 focus-within:ring-3 focus-within:ring-purple-500 focus-within:ring-offset-2 hover:shadow-xl sm:p-8 md:p-10 dark:bg-gray-800"
    aria-live="polite"
  >
    <AuthForm initialMode="login" />
  </div>

  <!-- Additional help text with improved visibility for accessibility -->
  <p class="mt-6 text-center text-sm text-gray-600 md:text-base dark:text-gray-400">
    {t("auth.login.help_text") || "Need help? Contact our support team."}
  </p>
</Layout>
