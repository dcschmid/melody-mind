---
import Layout from "@layouts/Layout.astro";
import { useTranslations } from "@utils/i18n";
import Headline from "@components/Headline.astro";
import Paragraph from "@components/Paragraph.astro";
import PodcastPlatformLinks from "@components/PodcastPlatformLinks.astro";
import { extractKeywords, generateMetaDescription } from "@utils/seo";

/**
 * Enable static site generation for all supported languages.
 */
export const prerender = true;

/**
 * Define supported languages and generate static paths for each language.
 */
export async function getStaticPaths() {
  // Define all languages supported by the application
  const supportedLanguages = [
    "de",
    "en",
    "es",
    "fr",
    "it",
    "pt",
    "da",
    "nl",
    "sv",
    "fi",
  ] as const;

  // Process data for each language
  const paths = supportedLanguages.map((lang) => ({
    params: { lang },
    props: { lang },
  }));

  return paths;
}

// Extract language from props
const { lang } = Astro.props;

// Use the i18n utilities for translations
const t = useTranslations(lang);

// Generate SEO content
const title = t("podcast.page.title");
const description = t("podcast.page.description");

// Enhanced SEO content using utility functions
const pageContent = `${title} ${description} Musikpodcasts Melody Mind Audio German English Deutsche Englische Podcasts`;

// Generate optimized meta description and keywords
const optimizedDescription = generateMetaDescription(pageContent);
const keywords = extractKeywords(pageContent) || t("meta.keywords");

// Additional structured data parameters for SEO
const pageType = "website";
const publishDate = new Date("2024-01-01");
const modifiedDate = new Date();
---

<Layout
  title={title}
  description={optimizedDescription}
  keywords={keywords}
  image={`/og-images/social-share-podcast-${lang}.jpg`}
  type={pageType}
  publishDate={publishDate}
  modifiedDate={modifiedDate}
>
  <div class="max-w-6xl mx-auto px-4 py-8">
    <!-- Page heading and description -->
    <div class="text-center mb-12">
      <Headline
        title={t("podcast.page.heading")}
        level="h1"
        className="text-white font-bold text-3xl md:text-4xl mb-4"
      />
      <div class="h-1 w-24 bg-purple-500 rounded-full mx-auto mt-2 mb-6"></div>
      <Paragraph
        description={t("podcast.page.description")}
        className="max-w-2xl mx-auto text-zinc-100"
      />

      <!-- Podcast Platform Links -->
      <div class="mt-8 flex justify-center">
        <div
          class="p-6 bg-zinc-800/80 backdrop-blur-sm rounded-xl border border-zinc-700/50 shadow-lg"
        >
          <h2 class="text-xl font-semibold text-white mb-4">
            {t("podcast.listen.heading")}
          </h2>
          <!-- Zeige sowohl deutsche als auch englische Podcast-Links an -->
          <PodcastPlatformLinks lang={lang} showAllLanguages={true} />
        </div>
      </div>
    </div>

    <!-- Podcast Episodes Section -->
    <div class="mt-12">
      <!-- Podcast Episodes will go here, you can add them later -->
    </div>

    <!-- WCAG information -->
    <div class="mt-16 text-center" aria-live="polite">
      <p class="text-sm text-zinc-400 flex items-center justify-center">
        <span class="inline-block mr-2" role="img" aria-label="Barrierefreiheit"
          >â™¿</span
        >
        <span>{t("accessibility.wcag")}</span>
      </p>
    </div>
  </div>
</Layout>

<style>
  /* Enhanced styling for podcast section */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
</style>
