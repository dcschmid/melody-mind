---
import Layout from "../layouts/Layout.astro";
import GoldenLPsSection from "../components/User/GoldenLPsSection.astro";
import FrameSection from "../components/User/FrameSection.astro";
import HeaderSection from "../components/User/HeaderSection.astro";
---

<Layout title="User Profile" showHeader={false}>
  <div class="content">
    <HeaderSection />

    <FrameSection />

    <GoldenLPsSection />
  </div>
</Layout>

<style lang="scss">
  .content {
    margin: 0 var(--spacing-spacing-s) var(--spacing-spacing-xl);
  }
</style>

<script>
  import { initLocalStorage } from "../utils/share/initLocalStorage";
  import { changeFrame } from "../utils/user/changeFrame";
  import { checkLocalStorageOnLoad } from "../utils/user/checkLocalStorageOnLoad";
  import { selectFrameItem } from "../utils/user/selectFrameItem";
  import { updateDisplay } from "../utils/user/updateDisplay";

  window.addEventListener("load", function () {
    initLocalStorage("userFrameSelected", "rocket");

    checkLocalStorageOnLoad();

    const wonPopRockBrain = localStorage.getItem("WonPopRockBrain") === "true";
    const wonBrainFrame = localStorage.getItem("WonBrainFrame") === "true";
    updateDisplay(wonPopRockBrain, wonBrainFrame);

    const userPoints = localStorage.getItem("userPoints") || "0";
    document!.querySelector(".pointsValue")!.textContent = userPoints + " Pt";

    selectFrameItem();

    changeFrame();
  });
</script>
