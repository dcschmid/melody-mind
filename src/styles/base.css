/* Base layer: component-neutral mappings & structural variables built on tokens */

:root {
  /* Borders referencing core colors */
  --border-primary: var(--color-neutral-700);
  --border-secondary: var(--color-neutral-600);
  --border-focus: var(--color-secondary-400); /* legacy variant (secondary) */
  --border-error: var(--color-error-500);
  --border-success: var(--color-success-500);
  --border-help-info: var(--color-info-600);

  /* Interactive states */
  --interactive-primary: var(--color-primary-600);
  --interactive-primary-hover: var(--color-primary-700);
  --interactive-primary-active: var(--color-primary-800);
  --interactive-secondary: var(--color-secondary-600);
  --interactive-secondary-hover: var(--color-secondary-700);
  --interactive-secondary-active: var(--color-secondary-800);

  /* Focus enhanced variants (keep single set; high contrast overrides can extend) */
  --focus-enhanced-shadow: 0 0 0 1px var(--color-primary-500), var(--shadow-lg);
  --focus-outline-dark: 3px solid var(--color-primary-300);
  --focus-outline-light: 3px solid var(--color-primary-600);

  /* Form */
  --form-bg: var(--color-neutral-800);
  --form-border: var(--border-primary);
  --form-border-focus: var(--border-focus);
  --form-text: var(--color-neutral-50);
  --form-placeholder: var(--color-neutral-400);
  --form-label: var(--color-neutral-200);
  --form-error: var(--color-error-400);
  --form-success: var(--color-success-400);

  /* Buttons */
  --btn-primary-bg: linear-gradient(135deg,var(--color-primary-600) 0%,var(--color-primary-700) 100%);
  --btn-primary-hover: linear-gradient(135deg,var(--color-primary-700) 0%,var(--color-primary-800) 100%);
  --btn-primary-text: var(--color-white);
  --btn-secondary-bg: transparent;
  --btn-secondary-border: var(--border-primary);
  --btn-secondary-text: var(--color-neutral-50);
  --btn-secondary-hover: rgba(255,255,255,0.05);

  /* Cards */
  --card-bg: var(--color-neutral-800);
  --card-border: var(--border-primary);
  --card-shadow: 0 8px 32px rgba(0,0,0,0.3);
  --card-shadow-hover: 0 12px 40px rgba(0,0,0,0.4);

  /* Tw-prose color tokens (WCAG AAA - 7:1+ contrast on dark backgrounds) */
  --tw-prose-body: #f4f4f5;             /* Very high contrast body text */
  --tw-prose-headings: #ffffff;         /* Pure white for headings */
  --tw-prose-links: #e9d5ff;            /* Light purple for links */
  --tw-prose-bold: #fafafa;             /* Bright for emphasis */
  --tw-prose-counters: #f4f4f5;         /* Match body */
  --tw-prose-bullets: #f4f4f5;          /* Match body */
  --tw-prose-hr: rgba(255, 255, 255, 0.2);  /* Visible dividers */
  --tw-prose-quotes: #f4f4f5;           /* Match body */
  --tw-prose-quote-borders: #c084fc;    /* Purple accent */
  --tw-prose-captions: #d4d4d8;         /* Slightly muted */
  --tw-prose-code: #e9d5ff;             /* Light purple */
  --tw-prose-pre-code: #f4f4f5;         /* High contrast in code blocks */
  --tw-prose-pre-bg: rgba(255, 255, 255, 0.05); /* Subtle background */
  --tw-prose-th-borders: rgba(255, 255, 255, 0.25); /* Table headers */
  --tw-prose-td-borders: rgba(255, 255, 255, 0.15); /* Table cells */

  /* Scrollbar semantic colors only (size/radius in tokens) */
  --scrollbar-track-bg: var(--color-neutral-900);
  --scrollbar-thumb-bg: var(--color-neutral-600);
  --scrollbar-thumb-hover: var(--color-neutral-400);

  /* Graphic novel realism semantic tokens */
  --gn-bg: var(--color-gn-soot-900);
  --gn-bg-muted: var(--color-gn-soot-800);
  --gn-ink: var(--color-gn-parchment-50);
  --gn-ink-muted: var(--color-gn-parchment-200);
  --gn-accent: var(--color-gn-amber-400);
  --gn-accent-strong: var(--color-gn-rust-400);
  --gn-accent-teal: var(--color-gn-teal-400);
  --gn-panel-border: var(--color-gn-soot-600);
  --gn-panel-inner: color-mix(in srgb, var(--color-gn-parchment-200) 8%, transparent);
  --gn-offset-shadow: 4px 4px 0 rgba(0, 0, 0, 0.65), 0 18px 40px rgba(0, 0, 0, 0.4);
  --gn-halftone: radial-gradient(circle at 20% 20%, rgba(255, 224, 173, 0.03), transparent 24%), radial-gradient(circle at 80% 10%, rgba(255, 188, 120, 0.05), transparent 26%), radial-gradient(circle at 60% 70%, rgba(255, 224, 173, 0.03), transparent 25%);
  --gn-noise: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='0.17'/%3E%3C/svg%3E");
}

/* Reduced motion & data media queries remain here */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 1ms !important; animation-iteration-count: 1 !important; transition-duration: 120ms !important; scroll-behavior: auto !important; }
  .shadow-2xl, .shadow-xl, .shadow-lg { box-shadow: var(--shadow-md) !important; }
  .hover\:-translate-y-1:hover { transform: translateY(-2px) !important; }
}

@media (prefers-reduced-data: reduce) {
  .bg-gradient-to-r, .bg-gradient-to-br, .bg-gradient-to-b, .bg-gradient-to-l, .bg-gradient-to-tr { background-image: none !important; background-color: #2c2f3a !important; }
  .shadow-2xl, .shadow-xl { box-shadow: var(--shadow-lg) !important; }
  .rounded-3xl { border-radius: 1.25rem !important; }
}
