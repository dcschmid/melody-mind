---
/**
 * Headline Component
 *
 * A versatile and accessible heading component that supports different heading levels,
 * custom styling, and proper semantic hierarchy. Follows WCAG AAA accessibility standards
 * and performance best practices.
 *
 * @component
 */
interface Props {
  /** Text content of the heading (can also use slot content instead) */
  title?: string;
  /** HTML heading level (h1-h6) for proper document hierarchy */
  level?: "h1" | "h2" | "h3" | "h4" | "h5" | "h6";
  /** Additional CSS classes to apply */
  className?: string;
  /** Optional ID for direct linking and document structure */
  id?: string;
  /** Adds tabindex="-1" to make the heading programmatically focusable when needed
   * (useful for skip navigation or focus management)
   */
  focusable?: boolean;
  /** Optional ARIA label for improved screen reader context */
  ariaLabel?: string;
}

const { title, level = "h1", className = "", id, focusable = false, ariaLabel } = Astro.props;

// Dynamic heading tag based on level prop
const Tag = level;

/**
 * BEM-style CSS classes for headline component
 * Follows WCAG AAA accessibility standards
 */
const baseClasses = "headline";
const headlineClasses = `${baseClasses} ${className}`.trim();

// Focusable attributes for accessibility when needed (skip navigation)
const focusableAttrs = focusable
  ? {
      tabindex: "-1",
      class: `${headlineClasses} headline--focusable`,
    }
  : { class: headlineClasses };
---

<style>
  /* ======================================
   * HEADLINE COMPONENT - BEM STYLE
   * ====================================== */

  .headline {
    /* Base headline styles with WCAG AAA compliance */
    font-size: 2rem;
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: 0.025em;
    margin-bottom: 1.5rem;
    color: var(--color-sky-500, #0ea5e9);
    text-wrap: balance;
    word-break: break-words;

    /* Responsive typography */
    @media (min-width: 768px) {
      font-size: 2.5rem;
    }
  }

  /* Focusable modifier for accessibility */
  .headline--focusable {
    /* Focus styles for skip navigation and screen readers */
    &:focus {
      outline: none;
      box-shadow:
        0 0 0 2px var(--color-sky-500, #0ea5e9),
        0 0 0 4px var(--color-zinc-900, #18181b);
    }
  }

  /* Size modifiers */
  .headline--small {
    font-size: 1.25rem;

    @media (min-width: 768px) {
      font-size: 1.5rem;
    }
  }

  .headline--large {
    font-size: 2.5rem;

    @media (min-width: 768px) {
      font-size: 3rem;
    }
  }

  /* Level-specific adjustments for semantic hierarchy */
  .headline h2 {
    margin-bottom: 1.25rem;
  }

  .headline h3 {
    margin-bottom: 1rem;
  }

  .headline h4,
  .headline h5,
  .headline h6 {
    margin-bottom: 0.75rem;
  }
</style>

<Tag {id} aria-label={ariaLabel} {...focusableAttrs}>
  {title || <slot />}
</Tag>
