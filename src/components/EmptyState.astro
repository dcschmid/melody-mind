---
/**
 * EmptyState Component - Responsive & Accessible
 *
 * Displays an empty state message with icon and optional action button.
 * Fully responsive with WCAG AAA compliance and optimized for all screen sizes.
 *
 * @component
 * @example
 * ```astro
 * <EmptyState
 *   headline="No games found"
 *   text="Try adjusting your search criteria"
 *   iconName="mdi:gamepad-variant"
 * >
 *   <ButtonLink href="/games" slot="action">
 *     Browse Games
 *   </ButtonLink>
 * </EmptyState>
 * ```
 */

import { Icon } from "astro-icon/components";
import Headline from "@components/Headline.astro";
import Paragraph from "@components/Paragraph.astro";

export interface Props {
  /** The main headline text */
  headline: string;
  /** The descriptive text below the headline */
  text: string;
  /** The icon name to display (from astro-icon) */
  iconName?: string;
  /** Additional CSS class for styling customization */
  className?: string;
  /** The heading level for the headline (default: h3) */
  headingLevel?: "h1" | "h2" | "h3" | "h4" | "h5" | "h6";
  /** Maximum width constraint for the content */
  maxWidth?: string;
  /** Minimum height for the empty state container */
  minHeight?: string;
}

const {
  headline,
  text,
  iconName = "alert-circle",
  className = "",
  headingLevel = "h3",
  maxWidth = "28rem",
  minHeight = "24rem",
} = Astro.props;

// Generate unique IDs for accessibility
const headlineId = `empty-state-${Math.random().toString(36).substr(2, 9)}`;
---

<div
  class={`empty-state ${className}`}
  role="status"
  aria-live="polite"
  aria-labelledby={headlineId}
  style={`--empty-state-max-width: ${maxWidth}; --empty-state-min-height: ${minHeight};`}
>
  <div class="empty-state__content">
    {iconName && <Icon name={iconName} class="empty-state__icon" aria-hidden="true" />}
    <Headline
      title={headline}
      level={headingLevel}
      className="empty-state__title"
      id={headlineId}
    />
    <Paragraph className="empty-state__text">
      {text}
    </Paragraph>
    <slot name="action" />
  </div>
</div>

<style lang="scss">
  /* ======================================
   * EMPTY STATE COMPONENT STYLES
   * Responsive design with global.css variables
   * WCAG AAA compliant - Zero hardcoded values
   * ====================================== */

  .empty-state {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: var(--empty-state-min-height, 24rem);
    padding: var(--space-xl);
    grid-column: 1 / -1;
    font-family: var(--font-family-primary);

    /* Responsive padding adjustments */
    @media (max-width: 47.9375em) {
      /* Below md breakpoint */
      padding: var(--space-lg);
      min-height: 20rem;
    }

    @media (max-width: 39.9375em) {
      /* Below sm breakpoint */
      padding: var(--space-md);
      min-height: 16rem;
    }

    &__content {
      text-align: center;
      max-width: var(--empty-state-max-width, 28rem);
      width: 100%;

      /* Responsive width adjustments */
      @media (max-width: 47.9375em) {
        /* Below md breakpoint */
        max-width: 100%;
        padding: 0 var(--space-md);
      }
    }

    &__icon {
      width: var(--icon-size-xl);
      height: var(--icon-size-xl);
      color: var(--text-tertiary);
      margin-bottom: var(--space-lg);

      /* Responsive icon sizing */
      @media (max-width: 47.9375em) {
        /* Below md breakpoint */
        width: var(--icon-size-lg);
        height: var(--icon-size-lg);
        margin-bottom: var(--space-md);
      }

      @media (max-width: 39.9375em) {
        /* Below sm breakpoint */
        width: var(--icon-size-md);
        height: var(--icon-size-md);
        margin-bottom: var(--space-sm);
      }
    }

    &__title {
      margin-bottom: var(--space-md);
      color: var(--text-secondary);

      /* Responsive title spacing */
      @media (max-width: 47.9375em) {
        /* Below md breakpoint */
        margin-bottom: var(--space-sm);
      }
    }

    &__text {
      color: var(--text-tertiary);
      margin-bottom: var(--space-lg);

      /* Responsive text spacing */
      @media (max-width: 47.9375em) {
        /* Below md breakpoint */
        margin-bottom: var(--space-md);
      }

      @media (max-width: 39.9375em) {
        /* Below sm breakpoint */
        margin-bottom: var(--space-sm);
      }
    }

    /* Support for custom CSS properties */
    &.custom-spacing {
      --space-custom: var(--space-2xl);
      gap: var(--space-custom);

      /* Responsive custom spacing */
      @media (max-width: 47.9375em) {
        /* Below md breakpoint */
        --space-custom: var(--space-xl);
      }

      @media (max-width: 39.9375em) {
        /* Below sm breakpoint */
        --space-custom: var(--space-lg);
      }
    }

    /* Container query support for better responsive behavior */
    @container (min-width: 20rem) {
      &__content {
        max-width: 100%;
      }
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .empty-state {
      &__icon {
        color: var(--text-secondary);
      }

      &__title {
        color: var(--text-primary);
      }
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .empty-state {
      transition: none;
    }
  }

  /* Forced colors mode support */
  @media (forced-colors: active) {
    .empty-state {
      &__icon {
        color: CanvasText;
      }

      &__title {
        color: CanvasText;
      }

      &__text {
        color: CanvasText;
      }
    }
  }
</style>
