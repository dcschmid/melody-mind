---
// Ein Test für ESLint mit Astro und WCAG AAA-Regeln
const title = "ESLint Testkomponente mit WCAG AAA";
const hasError = false;
const score = 500;
---

<div class="mx-auto max-w-md rounded-lg bg-purple-100 p-4 shadow-md">
  <h1 class="mb-4 text-2xl font-bold text-purple-900">WCAG AAA Test</h1>

  <!-- Test für informative-alt-text Regel - sollte zu kurz sein -->
  <img src="/images/test.jpg" alt="Testbild" class="mb-4 h-auto w-full rounded" />

  <!-- Korrektes Beispiel für informative-alt-text -->
  <img
    src="/images/musician.jpg"
    alt="Ein Gitarrist spielt während eines Rockkonzerts auf einer hell beleuchteten Bühne"
    class="mb-4 h-auto w-full rounded"
  />

  <!-- Test für color-contrast Regel - sollte zu schwachen Kontrast haben -->
  <p class="mb-2 bg-white text-gray-400">Dieser Text hat einen sehr schwachen Kontrast.</p>

  <!-- Korrektes Beispiel für color-contrast -->
  <p class="mb-2 bg-white text-gray-900">Dieser Text hat ausreichenden Kontrast für WCAG AAA.</p>

  {hasError && <p class="text-red-700">Es ist ein Fehler aufgetreten.</p>}

  <div class="flex items-center justify-between">
    <span class="font-medium">Punktzahl: {score}</span>
    <button
      type="button"
      aria-label="Weiter zum nächsten Level"
      class="rounded bg-purple-800 px-4 py-2 text-white transition-colors hover:bg-purple-900 focus:ring-2 focus:ring-purple-600 focus:ring-offset-2 focus:outline-none"
    >
      Weiter
    </button>
  </div>

  <!-- Test für aria-enhanced Regel - fehlen tabIndex und Keyboard Handlers -->
  <div
    role="button"
    aria-label="Problematischer Button"
    class="mt-4 rounded bg-blue-700 p-2 text-white"
  >
    Unvollständiger Button
  </div>

  <!-- Korrektes Beispiel für aria-enhanced -->
  <div
    role="button"
    tabIndex={0}
    aria-label="Korrekter Button mit Tastaturfunktionalität"
    onClick={() => console.log("Clicked")}
    onKeyDown={(e) => e.key === "Enter" && console.log("Enter pressed")}
    class="mt-4 cursor-pointer rounded bg-blue-700 p-2 text-white"
  >
    Korrekter Button
  </div>

  <!-- Test für heading-structure Regel - überspringt h2 -->
  <h1 class="mt-4 text-xl font-bold">Hauptüberschrift</h1>
  <h3 class="mt-2 text-lg font-medium">Unterabschnitt (h2 fehlt)</h3>
</div>

<style>
  /* Bessere Spezifität mit Klassen */
  .test-component {
    font-family: "Arial", sans-serif;
  }
</style>

<script>
  // Test für focus-management Regel - fokussiert ohne Ankündigung
  document.addEventListener("DOMContentLoaded", () => {
    const button = document.querySelector('div[role="button"]');
    if (button) {
      button.focus(); // Sollte eine Warnung auslösen
    }

    // Korrekte Fokus-Verwaltung würde so aussehen:
    // announceToScreenReader("Button erhält Fokus");
    // button.focus();

    console.warn("Test-Element gefunden - sollte eine Warnung auslösen");
  });

  /**
   * Eine Beispielfunktion für JSDoc-Tests
   * @returns {boolean} Immer true
   */
  function testFunction(): boolean {
    return true;
  }
</script>
