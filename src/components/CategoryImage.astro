---
/**
 * CategoryImage Component
 *
 * Renders a pre-generated responsive image set (AVIF + WebP) for a given category slug
 * without triggering additional Astro re-encoding. Falls back gracefully when
 * variants are missing.
 */

interface Props {
  slug: string; // category slug (already sanitized in JSON)
  alt: string;
  loading?: "eager" | "lazy";
  priority?: boolean;
  class?: string;
  fetchpriority?: "high" | "low" | "auto";
}

const {
  slug,
  alt,
  loading = "lazy",
  priority = false,
  class: className = "",
  fetchpriority = "auto",
} = Astro.props as Props;

// Wrapper passes through to generic component; retained for backward compatibility
// and clearer semantics in category-focused UI code.
---

<img
  src={`/category/${slug}.jpg`}
  {alt}
  {loading}
  fetchpriority={priority ? "high" : fetchpriority}
  decoding="async"
  width="1280"
  height="720"
  class={`h-full w-full object-cover ${className || ""}`.trim()}
  data-category-image={slug}
/>
