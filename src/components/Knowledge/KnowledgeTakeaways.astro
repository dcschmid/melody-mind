---
const { title = "Key takeaways", items = [] } = Astro.props as {
  title?: string;
  items?: string[];
};
---

{
  items.length ? (
    <aside class="knowledge-takeaways" aria-labelledby="knowledge-takeaways-title">
      <div class="knowledge-takeaways__header">
        <div class="knowledge-takeaways__badge">What you will take away</div>
        <h2 class="knowledge-takeaways__title" id="knowledge-takeaways-title">
          {title}
        </h2>
        <p class="knowledge-takeaways__subtitle">
          Short highlights to carry with you after reading.
        </p>
      </div>
      <ol class="knowledge-takeaways__list">
        {items.map((item) => (
          <li class="knowledge-takeaways__item">
            <span class="knowledge-takeaways__icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" role="img" aria-hidden="true">
                <path
                  d="M12 3.5l1.9 4.3 4.6.4-3.5 3.1 1 4.6-4-2.4-4 2.4 1-4.6-3.5-3.1 4.6-.4L12 3.5z"
                  fill="currentColor"
                />
              </svg>
            </span>
            <span class="knowledge-takeaways__text">{item}</span>
          </li>
        ))}
      </ol>
    </aside>
  ) : null
}

<style>
  .knowledge-takeaways {
    position: relative;
    display: grid;
    gap: 1rem;
    padding: 1.5rem;
    background: color-mix(in srgb, var(--gn-bg) 92%, transparent);
    border: 2px solid color-mix(in srgb, var(--gn-panel-border) 85%, transparent);
    border-radius: 1.25rem;
    box-shadow: var(--gn-offset-shadow);
  }

  .knowledge-takeaways::after {
    position: absolute;
    inset: 4px;
    pointer-events: none;
    content: "";
    border: 1px solid var(--gn-panel-inner);
    border-radius: calc(1.25rem - 0.25rem);
  }

  .knowledge-takeaways__header {
    display: grid;
    gap: 0.35rem;
  }

  .knowledge-takeaways__badge {
    inline-size: fit-content;
    padding: 0.2rem 0.7rem;
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--color-gn-amber-200);
    text-transform: uppercase;
    letter-spacing: 0.12em;
    background: rgba(123, 214, 255, 0.16);
    border: 1px solid color-mix(in srgb, var(--gn-panel-border) 80%, transparent);
    border-radius: 999px;
  }

  .knowledge-takeaways__title {
    margin: 0;
    font-size: clamp(1.4rem, 1.2rem + 1vi, 1.8rem);
    color: var(--gn-ink);
  }

  .knowledge-takeaways__subtitle {
    max-inline-size: 60ch;
    margin: 0;
    color: var(--gn-ink-muted);
  }

  .knowledge-takeaways__list {
    display: grid;
    gap: 0.75rem;
    padding: 0;
    margin: 0;
    list-style: none;
  }

  .knowledge-takeaways__item {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 0.65rem;
    align-items: start;
    padding: 0.75rem 0.9rem;
    background: color-mix(in srgb, var(--gn-bg-muted) 88%, transparent);
    border: 1px solid color-mix(in srgb, var(--gn-panel-border) 80%, transparent);
    border-radius: 0.9rem;
  }

  .knowledge-takeaways__icon {
    display: inline-flex;
    flex-shrink: 0;
    align-items: center;
    justify-content: center;
    inline-size: 2rem;
    block-size: 2rem;
    color: var(--color-gn-teal-300);
    background: rgba(123, 214, 255, 0.18);
    border-radius: 0.65rem;
  }

  .knowledge-takeaways__icon :global(svg) {
    inline-size: 1.1rem;
    block-size: 1.1rem;
  }

  .knowledge-takeaways__text {
    font-size: 1.05rem;
    line-height: 1.6;
    color: var(--gn-ink);
  }

  @media (width >= 768px) {
    .knowledge-takeaways__list {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }
</style>
