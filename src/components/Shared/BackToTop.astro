---
/**
 * @component BackToTop
 * @description Reusable back-to-top button component with optimized scroll behavior.
 * Provides consistent styling, accessibility, and performance across all pages.
 *
 * @example
 * ```astro
 * <BackToTop lang="en" />
 * <BackToTop lang="de" className="custom-position" />
 * ```
 */

import { Icon } from "astro-icon/components";
import { useTranslations } from "@utils/i18n";

/**
 * Props interface for the BackToTop component
 */
interface Props {
  /** Language code for internationalization */
  lang: string;
  /** Additional CSS class for custom positioning or styling */
  className?: string;
  /** Custom aria-label (overrides default translation) */
  ariaLabel?: string;
  /** Custom scroll threshold in pixels (uses CSS variable if not provided) */
  scrollThreshold?: number;
}

const { lang = "en", className = "", ariaLabel, scrollThreshold } = Astro.props;
const t = useTranslations(lang);

// Use custom aria-label or fallback to translation
const buttonAriaLabel = ariaLabel || t("common.back.to.top");
const screenReaderText = t("common.back.to.top");
---

<button
  id="back-to-top"
  class={`fixed z-30 min-w-12 min-h-12 p-4 bg-gn-amber-500 text-gn-soot-950 border-2 border-gn-soot-700 rounded-full shadow-[4px_4px_0_rgba(0,0,0,0.8)] transition-all duration-200 cursor-pointer outline-none right-4 bottom-4 hover:bg-gn-amber-400 hover:-translate-y-1 hover:shadow-[6px_6px_0_rgba(0,0,0,0.85)] focus-visible:ring-3 focus-visible:ring-gn-amber-300 focus-visible:ring-offset-2 focus-visible:ring-offset-gn-soot-900 active:translate-y-0.5 ${className}`.trim()}
  aria-label={buttonAriaLabel}
  type="button"
  style="display: none;"
  data-scroll-threshold={scrollThreshold}
>
  <Icon name="arrow-up" class="h-6 w-6 text-inherit md:h-8 md:w-8" aria-hidden="true" />
  <span class="sr-only">{screenReaderText}</span>
</button>
