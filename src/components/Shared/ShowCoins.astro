---
import { Icon } from "astro-icon/components";
import { getLangFromUrl, useTranslations } from "@utils/i18n";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<div
  class="flex items-center justify-center min-w-[44px] max-w-[120px] px-4 py-2
          bg-zinc-800 rounded-lg shadow-md text-zinc-50
          transition-all duration-300 will-change-transform
          hover:-translate-y-0.5 hover:shadow-lg
          focus-within:ring focus-within:ring-sky-300 focus-within:ring-opacity-75
          motion-safe:hover:shadow-lg"
  role="status"
  aria-label={t("coins.collected")}
  aria-live="polite"
  data-coins
>
  <div class="flex items-center gap-2 p-0.5">
    <Icon
      class="text-amber-400 w-6 h-6 drop-shadow motion-safe:animate-bounce motion-reduce:transform-none"
      name="coin"
      width={24}
      height={24}
      aria-hidden="true"
    />
    <span
      class="font-bold font-sans tabular-nums leading-tight"
      aria-atomic="true"
    >
      <span class="sr-only">{t("coins.collected")}:</span>
      <span class="inline-block min-w-[1.5ch] text-right">0</span>
    </span>
  </div>
</div>

<style>
  @media (forced-colors: active) {
    div[data-coins] {
      border: 2px solid CanvasText;
    }

    [data-coins] svg {
      forced-color-adjust: none;
      color: LinkText;
    }
  }

  @media print {
    div[data-coins] {
      border: 1px solid #000;
      box-shadow: none;
    }

    [data-coins] svg {
      display: none;
    }
  }
</style>
