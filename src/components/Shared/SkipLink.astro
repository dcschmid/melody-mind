---
/**
 * @component SkipLink
 * @description Accessibility component that allows keyboard users to bypass repetitive navigation
 * and quickly access the main content. Initially hidden visually but appears when focused.
 *
 * @example
 * ```astro
 * <SkipLink targetId="quiz-content" />
 * <SkipLink targetId="main-content" />
 * ```
 */
import { getLangFromUrl, useTranslations } from "@utils/i18n";
import { Icon } from "astro-icon/components";

interface Props {
  /**
   * The ID of the element to target when the skip link is activated
   * @default "main-content"
   */
  targetId?: string;
}

const { targetId = "main-content" } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const skipLinkClasses = "skip-link";
const iconClasses = "skip-link__icon";
---

<a
  href={`#${targetId}`}
  class={skipLinkClasses}
  data-skip-link
  aria-label={t("nav.skip.main")}
>
  <Icon name="external-link" class={iconClasses} aria-hidden="true" />
  {t("nav.skip.main")}
</a>
<style>
  .skip-link {
    position: absolute;
    inset-block-start: -9999px;
    inset-inline-start: 50%;
    z-index: 50;
    display: inline-flex;
    gap: 0.5rem;
    align-items: center;
    padding: 0.5rem 1rem;
    font-weight: 700;
    color: var(--color-gn-soot-950);
    text-decoration: none;
    background: var(--color-gn-amber-500);
    border-radius: 0 0 0.5rem 0.5rem;
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.7);
    transform: translateX(-50%);
  }

  .skip-link:focus-visible {
    inset-block-start: 0;
    outline: 2px solid var(--color-gn-amber-300);
    outline-offset: 4px;
  }

  .skip-link__icon {
    inline-size: 1rem;
    block-size: 1rem;
  }
</style>
